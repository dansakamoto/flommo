<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Dosis:wght@400&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.css"
    />
    <link rel="stylesheet" type="text/css" href="style-editor.css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/addons/p5.sound.min.js"></script>
    <script src="https://unpkg.com/hydra-synth"></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/javascript/javascript.min.js"
    ></script>
    <script defer src="/socket.io/socket.io.js"></script>
    <script defer src="js/sourcemanager.js"></script>
    <script defer src="js/controls.js"></script>
    <script defer src="js/renderer.js"></script>
    <script defer src="js/editor.js"></script>
  </head>

  <body>
    <main>
      <canvas id="out1"></canvas>

      <div id="interface">
        <div id="hud">
          <div id="menu">
            <div>
              <div class="label">MODES:</div>
              <button id="videobutton" onclick="toggleEditor('video')">
                VIDEO
              </button>
              <button id="hydrabutton" onclick="toggleEditor('hydra')">
                HYDRA
              </button>
              <button id="p5button" onclick="toggleEditor('p5')">P5</button>
            </div>
            <div>
              <button id="titlebutton" onclick="toggleEditor('title')">
                F
              </button>
              <button id="infobutton" onclick="toggleEditor('info')">?</button>
            </div>
          </div>

          <div id="nocursor">
            <div id="welcome">
              <span id="title">
                <img
                  style="width: 300px"
                  src="FLOMMO_LOGO.png"
                  alt="Flommo"
                /><span style="font-family: 'Courier New', Courier, monospace"
                  >0.2.0</span
                >
              </span>
              <br />
              <span>mixed-media flow machine</span>
              <br />
              <span>
                experimental ~ some features may not work outside of chrome
              </span>
              <br />
              <br />
              <span style="color: red"
                >ALERT: persistent storage temporarily disabled. uploaded files
                may be regularly deleted for now.</span
              >
              <br />
              <br />
              <a
                id="ghlink"
                target="_blank"
                href="https://github.com/dansakamoto/flommo"
                >view source on github</a
              >
            </div>
          </div>

          <div id="manual">
            <div id="m2">
              <span>Controls</span><br />
              <br />
              scroll down for gui<br />
              <br />
              keyboard:<br />
              ctrl + space: hide/unhide interface<br />
              ctrl + [0-9]: toggle source on/off<br />
              ctrl + q/w/e/r: change blend mode<br />
              ctrl + i: invert output<br />
              ctrl + enter: (while text area active) add+run code<br />
              ctrl + z/x/c: toggle input mode<br />
              ctrl + .: about<br />
              ctrl + /: show controls<br />
              <br />
              midi:<br />
              C3-A3: toggle source on/off<br />
              A#3-C#4: change blend mode<br />
              D4: invert output<br />
            </div>
          </div>

          <div id="editor"></div>

          <div id="videoeditor">
            <div id="videouploader">
              <label for="vidUpload">upload video</label><br />
              <input
                type="file"
                size="600px"
                id="vidUpload"
                name="vidUpload"
                onchange="uploadVid(this.files)"
              />
            </div>
          </div>
          <div id="hydraeditor"></div>
          <div id="p5editor"></div>
          <div id="empty"></div>
        </div>

        <div id="controls">
          <div id="sourceToggles"></div>
          <div id="blends">
            BLENDS:
            <input
              type="radio"
              id="source-over"
              name="blendInput"
              value="source-over"
              checked="true"
              onchange="toggleBlend('source-over')"
            />
            <label for="source-over">|q| source-over</label>
            <input
              type="radio"
              id="screen"
              name="blendInput"
              value="screen"
              onchange="toggleBlend('screen')"
            />
            <label for="screen">|w| screen</label>
            <input
              type="radio"
              id="multiply"
              name="blendInput"
              value="multiply"
              onchange="toggleBlend('multiply')"
            />
            <label for="multiply">|e| multiply</label>
            <input
              type="radio"
              id="difference"
              name="blendInput"
              value="difference"
              onchange="toggleBlend('difference')"
            />
            <label for="difference">|r| difference</label>
          </div>

          <div id="filters">
            FILTERS:
            <input
              type="checkbox"
              id="invert"
              name="filterInput"
              value="invert"
              onchange="toggleFilter('invert')"
            />
            <label for="invert">|i| invert</label>
          </div>

          <div id="midi">
            <label for="midion">MIDI listen:</label>
            <input
              type="checkbox"
              id="midion"
              name="midion"
              value="midion"
              onchange="toggleMidi()"
            />
          </div>
        </div>

        <div id="srcHeader">SOURCES</div>

        <div id="srcPreviews"></div>
      </div>
    </main>
  </body>
</html>
